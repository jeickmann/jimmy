<launch>
  <include file="$(find jimmy_drive)/launch/jimmy_usb.launch" pass_all_args="true" />
  <include file="$(find jimmy_drive)/launch/jimmy_apriltags.launch" pass_all_args="true" />
  <include file="$(find jimmy_drive)/launch/jimmy_drive.launch" pass_all_args="true" />


  <param name="map_description" command="$(find xacro)/xacro '$(find jimmy_drive)/cfg/map.urdf.xacro'"/>
  
  <node name="maptag_state_publisher" pkg="robot_state_publisher" type="robot_state_publisher">
	  <remap from="robot_description" to="map_description"/>
	  <param name="use_tf_static" value="false"/>
  </node>

  <node pkg="jimmy_drive" type="ar_localizer.py" name="localizer" output="screen">
    <param name="initial_x" value="1"/>
    <param name="initial_y" value="1"/>
  </node>

  <node pkg="move_base" type="move_base" respawn="false" name="move_base" output="screen">
    <rosparam param="controller_frequency">10</rosparam>
    <rosparam file="$(find jimmy_drive)/cfg/costmap_common_params.yaml" command="load" ns="global_costmap" />
    <rosparam file="$(find jimmy_drive)/cfg/costmap_common_params.yaml" command="load" ns="local_costmap" />
    <rosparam file="$(find jimmy_drive)/cfg/local_costmap_params.yaml" command="load" />
    <rosparam file="$(find jimmy_drive)/cfg/global_costmap_params.yaml" command="load" />
    <rosparam file="$(find jimmy_drive)/cfg/base_local_planner_params.yaml" command="load" />
  </node>
</launch>